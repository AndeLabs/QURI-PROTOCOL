# QURI PROTOCOL: Arquitectura World-Class

## Guรญa de Implementaciรณn y Roadmap

---

## Arquitectura Completa

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                           QURI PROTOCOL                                      โ
โ                    "The Premier Bitcoin Runes Platform"                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

                              โโโโโโโโโโโโโโโ
                              โ   USUARIO   โ
                              โ  (ICP Only) โ
                              โโโโโโโโฌโโโโโโโ
                                     โ
                    โโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโ
                    โ                โ                โ
                    โผ                โผ                โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                         LAYER 1: INTERFACE LAYER                             โ
โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ         โ
โ  โ   Web App   โ  โ  Mobile SDK โ  โ   API REST  โ  โ  WebSocket  โ         โ
โ  โ   (Next.js) โ  โ   (Future)  โ  โ  (Public)   โ  โ  (Realtime) โ         โ
โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                     โ
                                     โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      LAYER 2: SESSION & AUTH LAYER                           โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ       โ
โ  โ  ICP Identity (Requerido)                                        โ       โ
โ  โ  โข Internet Identity / Plug / NFID / Stoic                       โ       โ
โ  โ  โข Principal ID para todas las operaciones                       โ       โ
โ  โ  โข Maneja ckBTC para fees de settlement                          โ       โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ       โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ       โ
โ  โ  Bitcoin Address Input (Para Settlement)                         โ       โ
โ  โ  โข Usuario ingresa direcciรณn manualmente                         โ       โ
โ  โ  โข Validaciรณn automรกtica de formato                              โ       โ
โ  โ  โข Historial de direcciones guardadas                            โ       โ
โ  โ  โข Sin necesidad de conectar wallet Bitcoin                      โ       โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ       โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ       โ
โ  โ  Session Keys Manager (Estilo Odin.fun)                          โ       โ
โ  โ  โข Elimina aprobaciรณn por cada TX                                โ       โ
โ  โ  โข Tiempo de sesiรณn configurable                                 โ       โ
โ  โ  โข Lรญmites de gasto por sesiรณn                                   โ       โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                     โ
                                     โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                     LAYER 3: EXECUTION ENGINE (ICP)                          โ
โ                                                                              โ
โ  โโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโ                 โ
โ  โ  QURI Engine   โ  โ   Registry     โ  โ   Metadata     โ                 โ
โ  โ  Canister      โ  โ   Canister     โ  โ   Canister     โ                 โ
โ  โ                โ  โ                โ  โ                โ                 โ
โ  โ  โข Create      โ  โ  โข Index all   โ  โ  โข Rich media  โ                 โ
โ  โ  โข Trade       โ  โ    Runes       โ  โ  โข JSON/CBOR   โ                 โ
โ  โ  โข Burn        โ  โ  โข Balances    โ  โ  โข IPFS links  โ                 โ
โ  โ  โข Transfer    โ  โ  โข History     โ  โ  โข On-chain    โ                 โ
โ  โโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโ                 โ
โ                                                                              โ
โ  โโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโ                 โ
โ  โ  AMM Pool      โ  โ   Orderbook    โ  โ   Analytics    โ                 โ
โ  โ  Canister      โ  โ   Canister     โ  โ   Canister     โ                 โ
โ  โ                โ  โ                โ  โ                โ                 โ
โ  โ  โข Swap        โ  โ  โข Limit ordersโ  โ  โข Volume      โ                 โ
โ  โ  โข Liquidity   โ  โ  โข Market makerโ  โ  โข Price feeds โ                 โ
โ  โ  โข Fees        โ  โ  โข Matching    โ  โ  โข Leaderboard โ                 โ
โ  โโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโ                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                     โ
                                     โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    LAYER 4: SETTLEMENT ORCHESTRATOR                          โ
โ                                                                              โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ       โ
โ  โ  PSBT Orchestrator (Estilo Omnity REE)                           โ       โ
โ  โ                                                                   โ       โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ               โ       โ
โ  โ  โ   Batcher   โ  โ   Signer    โ  โ  Broadcasterโ               โ       โ
โ  โ  โ             โ  โ   (DPS)     โ  โ             โ               โ       โ
โ  โ  โ โข Acumula   โ  โ โข Threshold โ  โ โข Mempool   โ               โ       โ
โ  โ  โ   requests  โ  โ   Schnorr   โ  โ   monitor   โ               โ       โ
โ  โ  โ โข Optimiza  โ  โ โข Multi-sig โ  โ โข RBF/CPFP  โ               โ       โ
โ  โ  โ   fees      โ  โ   coord     โ  โ   support   โ               โ       โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ               โ       โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ       โ
โ                                                                              โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ       โ
โ  โ  Settlement Modes                                                 โ       โ
โ  โ                                                                   โ       โ
โ  โ  [INSTANT]     [BATCHED]      [SCHEDULED]     [MANUAL]           โ       โ
โ  โ  $1.50-2.00    $0.15-0.50     $0.05-0.15      User choice        โ       โ
โ  โ  1 confirm     Next batch     Low-fee window  Any time           โ       โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                     โ
                                     โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      LAYER 5: BITCOIN INTEGRATION                            โ
โ                                                                              โ
โ  โโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโ                 โ
โ  โ  Bitcoin       โ  โ   ckBTC        โ  โ   Mempool      โ                 โ
โ  โ  Canister      โ  โ   Ledger       โ  โ   Oracle       โ                 โ
โ  โ                โ  โ                โ  โ                โ                 โ
โ  โ  โข UTXO mgmt   โ  โ  โข 1:1 BTC     โ  โ  โข Fee rates   โ                 โ
โ  โ  โข TX build    โ  โ  โข Fast xfer   โ  โ  โข Block heightโ                 โ
โ  โ  โข Broadcast   โ  โ  โข ICRC-2      โ  โ  โข Congestion  โ                 โ
โ  โโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโ                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                     โ
                                     โผ
                         โโโโโโโโโโโโโโโโโโโโโ
                         โ  BITCOIN MAINNET  โ
                         โ                   โ
                         โ  โข Runes nativas  โ
                         โ  โข Inmutable      โ
                         โ  โข Verificable    โ
                         โโโโโโโโโโโโโโโโโโโโโ
```

---

## Sistema de Autenticaciรณn y Settlement

### Flujo Simplificado

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    FLUJO DE USUARIO EN QURI                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

PASO 1: Conectar ICP Wallet (Requerido para usar QURI)
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Internet Identity / Plug / NFID / Stoic            โ
โ  โข Principal ID para identificaciรณn                 โ
โ  โข Firma operaciones en QURI (< $0.01)             โ
โ  โข Maneja ckBTC para fees de settlement            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                         โ
                         โผ
PASO 2: Usar QURI (Crear, Trade, Transfer)
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Todo con ICP Wallet                                โ
โ  โข Crear Runes virtuales                           โ
โ  โข Trading instantรกneo                              โ
โ  โข Transfers entre usuarios                         โ
โ  โข Sin necesidad de Bitcoin wallet                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                         โ
                         โผ
PASO 3: Settlement a Bitcoin (Opcional)
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Input de Direcciรณn Bitcoin (NO conexiรณn de wallet) โ
โ                                                     โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ  Ingresa tu direcciรณn Bitcoin:              โ   โ
โ  โ  [bc1p7x9abc123...]                         โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                                                     โ
โ  โข Validaciรณn automรกtica de formato                โ
โ  โข Recomendaciรณn de Taproot (bc1p...)              โ
โ  โข Historial de direcciones usadas                 โ
โ  โข Checkbox de confirmaciรณn obligatorio            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### UI de Settlement

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                SETTLEMENT - Enviar a Bitcoin                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                  โ
โ  Tu Rune: QURIโขTOKEN                                            โ
โ  Estado: ๐ก Virtual (Tradeable en QURI)                         โ
โ                                                                  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ  โ  Direcciรณn Bitcoin para recibir:                        โ    โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ    โ
โ  โ  โ bc1p...                                         โ    โ    โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ    โ
โ  โ                                                         โ    โ
โ  โ  โ Direcciรณn Taproot vรกlida (recomendada para Runes)   โ    โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ                                                                  โ
โ  Direcciones guardadas:                                          โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ  โ  โญ bc1p7x9...abc - "Principal"              [Usar]     โ    โ
โ  โ     bc1qxy2...def - "Hardware"               [Usar]     โ    โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ                                                                  โ
โ  Fee estimado: ~$0.15 (batched) | ~$1.50 (instant)              โ
โ                                                                  โ
โ  โ๏ธ IMPORTANTE: Verifica que la direcciรณn es correcta.          โ
โ     Las transacciones Bitcoin son irreversibles.                โ
โ                                                                  โ
โ  [โ] Confirmo que esta direcciรณn es mรญa y soporta Runes         โ
โ                                                                  โ
โ  [Cancelar]                         [Hacer Settlement]           โ
โ                                                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### Validaciones Automรกticas

| Validaciรณn | Resultado |
|------------|-----------|
| Formato vรกlido | โ / โ Error |
| Red correcta (mainnet) | โ / โ "Direcciรณn de testnet" |
| Tipo Taproot (bc1p...) | โ Recomendado / โ๏ธ "Legacy, puede funcionar" |
| Direcciรณn no vacรญa | โ / โ "Ingresa una direcciรณn" |

### Casos de Uso

| Acciรณn | Wallet Requerida | Descripciรณn |
|--------|-----------------|-------------|
| Crear Rune Virtual | ICP Only | Sin BTC wallet necesaria |
| Trading | ICP Only | Swaps instantรกneos en QURI |
| Transfer Virtual | ICP Only | Enviar a otro Principal |
| Ver Portfolio | ICP Only | Dashboard completo |
| Settlement a Bitcoin | ICP + Direcciรณn BTC | Solo ingresar direcciรณn, no conectar wallet |

### Ventajas de este enfoque

1. **UX Simple**: Solo pegar direcciรณn, sin instalar wallets extra
2. **Flexible**: Funciona con cualquier wallet, incluso hardware wallets
3. **Rรกpido**: Un paso menos que conectar wallet
4. **Seguro**: Validaciones automรกticas previenen errores comunes
5. **Historial**: Guarda direcciones frecuentes para uso futuro

---

## Estados de un Rune en QURI

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    CICLO DE VIDA DE UN QURI RUNE                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

[1. DRAFT]           [2. VIRTUAL]         [3. PENDING]         [4. NATIVE]
    โ                     โ                    โ                    โ
    โผ                     โผ                    โผ                    โผ
โโโโโโโโโโโ          โโโโโโโโโโโ          โโโโโโโโโโโ          โโโโโโโโโโโ
โ Metadataโ          โ Live on โ          โ In PSBT โ          โ On-chainโ
โ only    โ          โ ICP     โ          โ Batch   โ          โ Bitcoin โ
โ         โ   โโโโถ   โ         โ   โโโโถ   โ         โ   โโโโถ   โ โฟ Nativeโ
โ $0      โ          โ <$0.01  โ          โ Waiting โ          โ Forever โ
โ         โ          โ Tradeableโ         โ confirm โ          โ         โ
โโโโโโโโโโโ          โโโโโโโโโโโ          โโโโโโโโโโโ          โโโโโโโโโโโ
```

### Badges Visuales
- ๐ต **DRAFT** - "Borrador - Sin costo"
- ๐ก **VIRTUAL** - "Activo en QURI - Tradeable"
- ๐ **PENDING** - "Settlement en progreso..."
- ๐ข **NATIVE** - "โฟ Bitcoin Nativo - Verificado"

---

## Costos Proyectados

| Operaciรณn | Modelo Actual | Nuevo Modelo | Ahorro |
|-----------|--------------|--------------|--------|
| Crear Rune | $19.50 (20k sats) | **< $0.01** | 99.95% |
| Settlement (instant) | N/A | $1.50-2.00 | - |
| Settlement (batched) | N/A | **$0.05-0.20** | - |
| Trading | N/A | **$0** (virtual) | - |
| Transfer | $0.50-1.00 | **< $0.001** | 99.9% |

---

## QURI ROADMAP

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    QURI ROADMAP                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

FASE 1: Core Engine Refactor
โโโ [ ] Refactor tipos y estados
โโโ [ ] Virtual Rune Engine
โโโ [ ] Settlement Engine bรกsico
โโโ [ ] Bitcoin Address Input System
โโโ [ ] Address validation utilities
โโโ [ ] Tests unitarios

FASE 2: PSBT Batching
โโโ [ ] Batch Coordinator
โโโ [ ] Fee Optimizer
โโโ [ ] Mempool integration
โโโ [ ] Tests de integraciรณn

FASE 3: Session Keys
โโโ [ ] Session Manager
โโโ [ ] Frontend integration
โโโ [ ] Security audit
โโโ [ ] UX testing

FASE 4: AMM Trading
โโโ [ ] AMM Pool canister
โโโ [ ] Bonding Curve
โโโ [ ] Liquidity management
โโโ [ ] Trading UI

FASE 5: Metadata System
โโโ [ ] Metadata Canister
โโโ [ ] IPFS integration
โโโ [ ] Image optimization
โโโ [ ] Verification system

FASE 6: Analytics & Polish
โโโ [ ] Analytics Canister
โโโ [ ] Real-time feeds
โโโ [ ] Dashboard UI
โโโ [ ] Documentation
```

---

## Por quรฉ esta arquitectura es la mejor

1. **Escalable**: Puede manejar millones de Runes
2. **Modular**: Cada componente es independiente y upgradeable
3. **Econรณmica**: < $0.01 para crear, fees opcionales para settlement
4. **Rรกpida**: 2 segundos para operaciones virtuales
5. **Segura**: Threshold signatures, non-custodial
6. **Flexible**: Usuario decide cuรกndo/si hacer settlement
7. **Competitiva**: Mejor que Odin.fun + Omnity combinados
8. **Bitcoin Nativa**: Settlement real cuando se necesita

---

## Modelos de Referencia

- **Odin.fun**: Session keys, bonding curves, ICP backend
- **Omnity REE**: PSBT orchestration, non-custodial settlement
- **Liquidium**: P2P lending con PSBTs
- **Luminex BRC-69**: Recursive inscriptions para reducir fees
- **Arch Network**: eBPF VM on Bitcoin

---

## Implementaciones Completadas (Frontend)

### โ Sistema de Autenticaciรณn Dual

```
lib/auth/
โโโ types.ts                    # Tipos completos para dual auth
โโโ DualAuthProvider.tsx        # Provider React unificado
โโโ BitcoinAuthProvider.ts      # Sign-in with Bitcoin (ic-siwb)
โโโ ICPAuthProvider.ts          # Internet Identity refactorizado
โโโ hooks/useAuth.ts            # Hooks especializados
โโโ utils/
    โโโ walletDetection.ts      # Detecciรณn de wallets Bitcoin
    โโโ authStorage.ts          # Persistencia de sesiรณn
```

**Caracterรญsticas:**
- Internet Identity + Sign-in with Bitcoin (SIWB)
- Soporte para wallets: UniSat, Xverse, Leather, OKX, Phantom
- Principal unificado para operaciones ICP
- Backward compatibility con `useICP()` existente

### โ Integraciรณn Omnity Runes Indexer

```
lib/omnity/
โโโ runesIndexer.ts             # Cliente para canister indexer
โโโ types.ts                    # Tipos para runes data
โโโ index.ts                    # Exports

hooks/
โโโ useRunesIndexer.ts          # React Query hooks
```

**Endpoints integrados:**
- `get_latest_block` - Altura de bloque actual
- `get_rune` / `get_rune_by_id` - Datos de rune especรญfico
- `get_rune_balances` - Balances por direcciรณn
- `search_runes` - Bรบsqueda de runes

**Canister IDs:**
- Mainnet: `kzrva-ziaaa-aaaar-qamyq-cai`
- Testnet4: `f2dwm-caaaa-aaaao-qjxlq-cai`

### โ Sistema de Actores Async

```typescript
// Todos los actores ahora son async para garantizar agent inicializado
export async function getRegistryActor(): Promise<ActorSubclass<RegistryService>>
export async function getRuneEngineActor(): Promise<ActorSubclass<RuneEngineService>>
export async function getBitcoinIntegrationActor(): Promise<ActorSubclass<BitcoinIntegrationService>>
export async function getICPLedgerActor(): Promise<ActorSubclass<any>>
export async function getCyclesLedgerActor(): Promise<ActorSubclass<any>>
```

### โ Pรกginas Actualizadas con Dual Auth

| Pรกgina | Estado | Caracterรญsticas |
|--------|--------|-----------------|
| `/wallet` | โ | Balances ICP, Cycles, ckBTC, Runes |
| `/create` | โ | Etching con fee estimation real |
| `/swap` | โ | KongSwap integration |
| `/bridge` | โ | BTCโckBTC, ICPโCycles |
| `/settlement` | โ | Settlement modes |
| `/explorer` | โ | Omnity indexer + Registry |

### โ Componentes Wallet

```
components/wallet/
โโโ WalletButton.tsx            # Botรณn de conexiรณn
โโโ WalletModal.tsx             # Modal con balances
โโโ ConnectWalletModal.tsx      # Selector de mรฉtodo auth
โโโ BalanceCard.tsx             # Tarjetas de balance
โโโ TransactionHistory.tsx      # Historial de TX
```

### ๐ Pendiente de Implementaciรณn

- [ ] SIWB Canister deployment (necesita canister ID)
- [ ] Session keys para TX sin aprobaciรณn
- [ ] AMM Pool Canister
- [ ] Orderbook Canister
- [ ] PSBT Orchestrator para settlements reales
